<!-- partial: assets/partials/incoming_pemol_modal.html -->
<div class="asm-modal-backdrop" id="asmModal" aria-hidden="true">
    <div class="asm-modal" role="dialog" aria-modal="true" aria-labelledby="asmTitle" tabindex="-1">
        <!-- HEADER -->
        <div class="asm-modal-header">
            <h2 class="asm-modal-title" id="asmTitle">Detail PEMOL</h2>

            <button class="asm-modal-close" type="button" aria-label="Tutup dialog" title="Tutup">
                <span aria-hidden="true">Ã—</span>
            </button>
        </div>

        <!-- BODY -->
        <div class="asm-modal-body">
            <!-- FILTER BAR -->
            <div class="asm-filter-bar">
                <!-- Search -->
                <div class="rsm-search-component-container"></div>

                <!-- Date range -->

                <!-- Date component container -->
                <div class="rsm-date-component-container"></div>
            </div>

            <!-- TABLE CARD -->
            <div class="asm-table-card">
                <table class="asm-table">
                    <thead>
                        <tr>
                            <th rowspan="2" class="text-center">No</th>
                            <th rowspan="2">RSM Name</th>
                            <th rowspan="2" class="text-center">NIK Sales</th>
                            <th rowspan="2" class="text-center">Branch</th>
                            <th rowspan="2" class="text-center">Total DSR</th>
                            <th rowspan="2" class="text-center">Total <br>Input DSR</th>

                            <th colspan="2" class="text-center rsm-group">Input</th>

                            <th rowspan="2" class="text-center">Total <br>Input</th>
                        </tr>
                        <tr>
                            <th class="text-center rsm-group-col">Active</th>
                            <th class="text-center">Input</th>

                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="text-center">1</td>
                            <td>Ramaldo Oktama</td>
                            <td class="text-center">K1104148</td>
                            <td class="text-center">Jakarta</td>
                            <td class="text-center">46</td>
                            <td class="text-center">44</td>
                            <td class="text-center">44</td>
                            <td class="text-center">44</td>
                            <td class="text-center">
                                1
                            </td>
                        </tr>

                        <tr>
                            <td class="text-center">2</td>
                            <td>Asep Syaefudin Nugraha</td>
                            <td class="text-center">K1200215</td>
                            <td class="text-center">Bandung</td>
                            <td class="text-center">144</td>
                            <td class="text-center">0</td>
                            <td class="text-center">44</td>
                            <td class="text-center">44</td>
                            <td class="text-center">
                                1
                            </td>
                        </tr>

                        <tr>
                            <td class="text-center">3</td>
                            <td>Kiwamudin</td>
                            <td class="text-center">K1102242</td>
                            <td class="text-center">Bandung</td>
                            <td class="text-center">185</td>
                            <td class="text-center">0</td>
                            <td class="text-center">44</td>
                            <td class="text-center">44</td>
                            <td class="text-center">
                                1
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- FOOTER / PAGINATION -->
            <div class="rsm-pagination-component-container"></div>
        </div>
    </div>
</div>

<script>
    // script khusus untuk close modal (Escape, klik backdrop, klik tombol X)
    (function () {
        var backdrop = document.getElementById('asmModal');
        if (!backdrop) return;

        function closeModal() {
            backdrop.classList.remove('is-open');
            backdrop.setAttribute('aria-hidden', 'true');
        }

        backdrop.addEventListener('click', function (e) {
            if (e.target === backdrop || e.target.classList.contains('asm-modal-close')) {
                closeModal();
            }
        });

        document.addEventListener('keydown', function (e) {
            if (e.key === 'Escape' && backdrop.classList.contains('is-open')) {
                closeModal();
            }
        });
    })();
</script>

<script>
    // Load Date Pickers
    fetch('assets/partials/components/date_picker.html')
        .then(response => response.text())
        .then(html => {
            document.querySelectorAll('.rsm-date-component-container').forEach(container => {
                if (container.innerHTML.trim() === '') {
                    container.innerHTML = html;
                    container.querySelectorAll('script').forEach(oldScript => {
                        const newScript = document.createElement('script');
                        newScript.textContent = oldScript.textContent;
                        document.body.appendChild(newScript);
                    });
                }
            });
        });
</script>

<script>
    // Load Pagination
    fetch('assets/partials/components/pagination.html')
        .then(response => response.text())
        .then(html => {
            document.querySelectorAll('.rsm-pagination-component-container').forEach(container => {
                if (container.innerHTML.trim() === '') {
                    container.innerHTML = html;
                }
            });
        });
</script>

<script>
    // Load Search Component
    fetch('assets/partials/components/search.html')
        .then(response => response.text())
        .then(html => {
            document.querySelectorAll('.rsm-search-component-container').forEach(container => {
                if (container.innerHTML.trim() === '') {
                    container.innerHTML = html;
                }
            });
        });
</script>