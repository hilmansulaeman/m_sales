<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Duplicate Check Table</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="assets/css/duplicate_check.css" />
  </head>

  <body class="body-rsm">
    <!-- Duplicate Check Main Card -->
    <div class="dup-check-container">
      <div class="dup-check-inner">
        <!-- FORM SIDE -->
        <div class="dup-check-form">
          <!-- Name Field -->
          <div class="dup-check-field-group">
            <div class="dup-check-label">Name</div>
            <div class="dup-check-input-wrapper">
              <input
                type="text"
                id="dc-input-name"
                class="dup-check-input"
                placeholder="Add name"
              />
            </div>
          </div>

          <!-- DOB Field -->
          <div class="dup-check-field-group">
            <div class="dup-check-label">DOB</div>
            <div class="dup-check-input-wrapper">
              <input
                type="text"
                id="dc-input-dob"
                class="dup-check-input"
                placeholder="Add DOB"
              />
              <div class="dup-check-date-icon" title="Date Picker"></div>
            </div>
          </div>

          <!-- Search Button -->
          <div class="dup-check-search-btn" id="dc-search-btn">Search</div>
        </div>

        <!-- DIVIDER -->
        <div class="dup-check-divider"></div>

        <!-- RESULT SIDE -->
        <div class="dup-check-result">
          <div class="dup-check-result-header">Status Duplicate</div>
          <!-- Result Body (Content will be injected here) -->
          <div
            id="dc-result-body"
            class="dup-check-result-body"
            style="min-height: 200px; background: white"
          >
            <!-- Empty initially -->
          </div>
          <!-- Footer (Hidden initially) -->
          <div
            id="dc-result-footer"
            class="dup-check-status-footer"
            style="display: none"
          >
            <div class="dup-check-icon-bg"></div>
            <div class="dup-check-icon-fg"></div>
            <div
              style="
                color: white;
                font-size: 18px;
                font-family: 'TikTok Sans', sans-serif;
                font-weight: 700;
              "
            >
              Info: DUPLICATE DIKA
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading Overlay -->
    <div id="dc-loading-overlay" class="dup-check-loading-overlay">
      <!-- Spinner Hardcoded directly for reliability -->
      <div class="loading-container">
        <div class="loading-spinner"></div>
      </div>
    </div>

    <script>
      (function () {
        // Use a slight delay or simple check to ensure DOM elements are ready if needed
        setTimeout(function () {
          var searchBtn = document.getElementById("dc-search-btn");
          var resultBody = document.getElementById("dc-result-body");
          var resultFooter = document.getElementById("dc-result-footer");
          var loadingOverlay = document.getElementById("dc-loading-overlay");
          var inputName = document.getElementById("dc-input-name");
          var inputDob = document.getElementById("dc-input-dob");

          if (searchBtn) {
            console.log("Search button found, attaching listener");
            searchBtn.addEventListener("click", function () {
              console.log("Search button clicked");

              var nameVal = inputName.value || "Dedi Handoko";
              var dobVal = inputDob.value || "12-Sep-1987";

              // Show Loading
              if (loadingOverlay) {
                loadingOverlay.style.display = "flex";
              } else {
                console.error("Loading overlay not found");
              }

              // Update inputs for demo purpose (to match image)
              if (inputName) inputName.value = nameVal;
              if (inputDob) inputDob.value = dobVal;

              // Simulate Delay
              setTimeout(function () {
                // Hide Loading
                if (loadingOverlay) loadingOverlay.style.display = "none";

                // Populate Result
                var resultHtml = `
                            <div class="dup-check-result-row">
                                <div class="dup-check-result-label">Name</div>
                                <div class="dup-check-result-value">${nameVal}</div>
                            </div>
                            <div class="dup-check-result-row">
                                <div class="dup-check-result-label">DOB</div>
                                <div class="dup-check-result-value">${dobVal}</div>
                            </div>
                        `;

                if (resultBody) {
                  resultBody.innerHTML = resultHtml;
                  resultBody.style.minHeight = "auto"; // Remove fixed height
                }

                // Show Footer
                if (resultFooter) resultFooter.style.display = "flex";
              }, 2000); // 2 seconds delay
            });
          } else {
            console.error("Search button not found by ID 'dc-search-btn'");
          }
        }, 100); // 100ms delay to ensure DOM insertion is complete
      })();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
